{% extends "base.html" %}
{% block title %}Керування користувачами{% endblock %}
{% block content %}
  <h1>Користувачі</h1>

  <h2>Створити користувача</h2>
  <form method="post" action="{{ url_for('admin_create_user') }}">
    <div class="form-row">
      <label>Ім'я користувача</label>
      <input name="username" required>
    </div>
    <div class="form-row">
      <label>Пароль</label>
      <input name="password" type="password" required>
    </div>
    <div class="form-row">
      <label>Роль</label>
      <select name="role">
        <option value="operator">operator</option>
        <option value="editor">editor</option>
        <option value="admin">admin</option>
      </select>
    </div>
    <div class="form-actions">
      <button class="btn-create" type="submit">Створити</button>
    </div>
  </form>

  <h2>Список користувачів</h2>
  <table class="records-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>Role</th>
        <th>Дія</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
        <tr>
          <td>{{ u.id }}</td>
          <td>{{ u.username }}</td>
          <td>{{ u.role }}</td>
          <td>
            {% if current_user.id != u.id %}
              <form method="post" action="{{ url_for('admin_delete_user', user_id=u.id) }}" style="display:inline;">
                <button class="btn-delete" type="submit">Видалити</button>
              </form>
            {% else %}
              —
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
