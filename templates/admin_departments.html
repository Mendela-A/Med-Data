{% extends "base.html" %}
{% block title %}Керування відділеннями{% endblock %}
{% block breadcrumbs %}
  <li class="breadcrumb-item"><a href="{{ url_for('admin.admin_users') }}">Адмін</a></li>
  <li class="breadcrumb-item active" aria-current="page">Відділення</li>
{% endblock %}
{% block content %}
  <h1 class="h4 mb-4">Відділення</h1>

  <div class="card mb-4">
    <div class="card-body">
      <h2 class="h6 mb-3"><i class="bi bi-building-add me-2"></i>Додати відділення</h2>
      <form method="post" action="{{ url_for('admin.admin_create_department') }}" class="row gx-3 gy-2 align-items-end">
        <div class="col-sm-6">
          <label class="form-label">Назва</label>
          <input class="form-control" name="name" required>
        </div>
        <div class="col-auto">
          <button class="btn btn-primary" type="submit"><i class="bi bi-plus-lg me-1"></i>Додати</button>
        </div>
      </form>
    </div>
  </div>

  <div class="card">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover mb-0">
          <thead>
            <tr>
              <th>ID</th>
              <th>Назва</th>
              <th>Дія</th>
            </tr>
          </thead>
          <tbody>
            {% for d in departments %}
              <tr>
                <td>{{ d.id }}</td>
                <td><span class="fw-medium">{{ d.name }}</span></td>
                <td>
                  <form method="post" action="{{ url_for('admin.admin_delete_department', dept_id=d.id) }}" style="display:inline;" class="delete-form" data-confirm="Видалити відділення «{{ d.name }}»?">
                    <button class="btn btn-sm btn-outline-danger" type="submit"><i class="bi bi-trash me-1"></i>Видалити</button>
                  </form>
                </td>
              </tr>
            {% else %}
              <tr>
                <td colspan="3" class="text-center py-4">
                  <i class="bi bi-building text-muted" style="font-size: 2rem;"></i>
                  <p class="text-muted mt-2 mb-0">Відділень поки немає</p>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}
